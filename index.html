<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Meta Tags -->
    <title>Sun Exposure Route Planner - A Fun Pet Project</title>
    <meta name="description" content="A fun side project to visualize which side of your car gets sun exposure during road trips. Built for curiosity and entertainment.">
    <meta name="keywords" content="sun exposure, route planning, pet project, car sun analysis, fun tool">
    <meta name="author" content="Gabor Vecsei">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://gaborvecsei.github.io/Car-Route-Visualizer/">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://gaborvecsei.github.io/Car-Route-Visualizer/">
    <meta property="og:title" content="Sun Exposure Route Planner - A Fun Pet Project">
    <meta property="og:description" content="A fun side project to see which side of your car gets sun exposure during road trips.">
    <meta property="og:image" content="https://gaborvecsei.github.io/Car-Route-Visualizer/og-image.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="Sun Exposure Route Planner">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://gaborvecsei.github.io/Car-Route-Visualizer/">
    <meta property="twitter:title" content="Sun Exposure Route Planner - A Fun Pet Project">
    <meta property="twitter:description" content="A fun side project to see which side of your car gets sun exposure during road trips.">
    <meta property="twitter:image" content="https://gaborvecsei.github.io/Car-Route-Visualizer/og-image.jpg">
    
    <!-- Favicon and App Icons -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚òÄÔ∏è</text></svg>">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚òÄÔ∏è</text></svg>">
    <link rel="manifest" href="/site.webmanifest">
    <meta name="theme-color" content="#1976d2">
    <meta name="msapplication-TileColor" content="#1976d2">
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://unpkg.com">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', '-apple-system', 'sans-serif']
                    },
                    colors: {
                        border: "hsl(214.3 31.8% 91.4%)",
                        input: "hsl(214.3 31.8% 91.4%)",
                        ring: "hsl(222.2 84% 4.9%)",
                        background: "hsl(0 0% 100%)",
                        foreground: "hsl(222.2 84% 4.9%)",
                        primary: {
                          DEFAULT: "hsl(222.2 47.4% 11.2%)",
                          foreground: "hsl(210 40% 98%)",
                        },
                        secondary: {
                          DEFAULT: "hsl(210 40% 96%)",
                          foreground: "hsl(222.2 84% 4.9%)",
                        },
                        muted: {
                          DEFAULT: "hsl(210 40% 96%)",
                          foreground: "hsl(215.4 16.3% 46.9%)",
                        },
                        accent: {
                          DEFAULT: "hsl(210 40% 96%)",
                          foreground: "hsl(222.2 84% 4.9%)",
                        },
                    }
                }
            }
        }
    </script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Sun Exposure Route Planner",
        "description": "A fun pet project to visualize sun exposure on different sides of your car during road trips.",
        "url": "https://gaborvecsei.github.io/Car-Route-Visualizer/",
        "applicationCategory": "EntertainmentApplication",
        "operatingSystem": "Web Browser",
        "featureList": [
            "Sun position tracking",
            "Route analysis",
            "Car-side sun exposure estimation"
        ]
    }
    </script>
</head>
<body class="font-sans bg-background min-h-screen text-foreground leading-relaxed overflow-x-hidden">
    <a href="#main-content" class="absolute -top-10 left-1 bg-primary text-primary-foreground px-2 py-2 no-underline rounded z-[1000] font-semibold focus:top-1">Skip to main content</a>
    <div class="max-w-full m-0 p-0 min-h-screen flex flex-col">
        <header class="px-4 py-4 text-center border-b" role="banner">
            <h1 class="text-lg md:text-xl font-semibold mb-1">‚òÄÔ∏è Sun Exposure Route Planner</h1>
            <p class="text-muted-foreground text-xs md:text-sm">Discover which side of your car gets hit by sun during your journey</p>
        </header>
        
        <main id="main-content" class="flex-1 flex flex-col md:grid md:grid-cols-[280px_1fr] lg:grid-cols-[280px_1fr_280px] gap-4 h-auto md:h-[600px] p-4" role="main">
            <!-- Sidebar with controls -->
            <section class="bg-background rounded-lg p-4 overflow-y-auto border w-full md:w-auto mb-4 md:mb-0 flex-shrink-0" aria-label="Route and sun tracking controls">
                <div class="mb-4">
                    <h3 class="text-base font-semibold mb-3 flex items-center gap-2"><span class="text-sm">üìç</span> Route</h3>
                    <div class="space-y-3">
                        <div>
                            <label for="route-from" class="block text-xs font-medium mb-1">From</label>
                            <input type="text" id="route-from" value="" class="flex h-8 w-full rounded-md border border-input bg-background px-3 py-1 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50" placeholder="Starting location" aria-describedby="route-from-help">
                            <div id="route-from-help" class="sr-only">Enter your starting location</div>
                        </div>
                        <div>
                            <label for="route-to" class="block text-xs font-medium mb-1">To</label>
                            <input type="text" id="route-to" value="" class="flex h-8 w-full rounded-md border border-input bg-background px-3 py-1 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50" placeholder="Destination" aria-describedby="route-to-help">
                            <div id="route-to-help" class="sr-only">Enter your destination</div>
                        </div>
                    </div>
                </div>
                
                <div class="mb-4">
                    <h3 class="text-base font-semibold mb-3 flex items-center gap-2"><span class="text-sm">‚òÄÔ∏è</span> Settings</h3>
                    <div class="space-y-3 mb-3">
                        <div>
                            <label for="trip-date" class="block text-xs font-medium mb-1">Date</label>
                            <input type="date" id="trip-date" class="flex h-8 w-full rounded-md border border-input bg-background px-3 py-1 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50">
                        </div>
                        <div>
                            <label for="trip-time" class="block text-xs font-medium mb-1">Time (UTC)</label>
                            <input type="time" id="trip-time" class="flex h-8 w-full rounded-md border border-input bg-background px-3 py-1 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50">
                        </div>
                    </div>
                    <div class="flex items-center justify-between p-3 bg-secondary rounded-lg border">
                        <label for="analysis-points" class="text-xs font-medium">Points:</label>
                        <input type="number" id="analysis-points" value="12" min="6" max="20" step="1" class="w-16 text-center rounded-md border border-input bg-background px-2 py-1 text-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2">
                    </div>
                </div>
                
                <button id="visualize-btn" class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-8 px-3 py-1 w-full gap-2" type="button" aria-describedby="analyze-help">
                    Analyze
                </button>
                <div id="analyze-help" class="sr-only">Calculate sun exposure for your planned route</div>
            </section>
            
            <!-- Map section -->
            <section class="bg-background rounded-lg relative overflow-hidden border w-full h-[400px] md:h-auto mb-4 md:mb-0 flex-shrink-0" aria-label="Interactive map">
                <div id="map" class="h-full w-full" role="img" aria-label="Interactive route map"></div>
                <div id="status" class="absolute bottom-2 left-2 right-2 p-2 text-center rounded-md text-xs bg-background/95 backdrop-blur-sm border z-[1000] opacity-0 transition-opacity duration-300 [&:not(:empty)]:opacity-100" role="status" aria-live="polite"></div>
            </section>
            
            <!-- Results panel -->
            <aside class="bg-background rounded-lg p-4 overflow-y-auto border w-full md:w-auto md:col-span-2 lg:col-span-1 min-h-[300px] flex-shrink-0" aria-label="Sun exposure analysis results">
                <!-- Placeholder when no results -->
                <div id="results-placeholder" class="flex items-center justify-center h-full p-4">
                    <div class="text-center max-w-sm">
                        <div class="text-2xl mb-3">üìä</div>
                        <h3 class="text-base font-semibold mb-2">Results</h3>
                        <p class="text-muted-foreground text-xs leading-relaxed mb-4">Click "Analyze" to see sun exposure data</p>
                        <div class="flex flex-col gap-2">
                            <div class="flex items-center gap-2 px-3 py-2 bg-secondary rounded-lg text-xs border">
                                <span class="text-sm">üåÖ</span>
                                <span>Sun tracking</span>
                            </div>
                            <div class="flex items-center gap-2 px-3 py-2 bg-secondary rounded-lg text-xs border">
                                <span class="text-sm">üéØ</span>
                                <span>Percentages</span>
                            </div>
                            <div class="flex items-center gap-2 px-3 py-2 bg-secondary rounded-lg text-xs border">
                                <span class="text-sm">üöó</span>
                                <span>Side breakdown</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Results container -->
                <div id="car-summary" class="block" style="display: none;">
                    <h3 class="text-center mb-4 text-base font-semibold">‚òÄÔ∏è Sun Exposure Summary</h3>
                    <div class="flex justify-center items-center px-4 py-6">
                        <div class="relative">
                            <!-- Top-down car SVG -->
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 240" width="120" class="mx-auto text-muted-foreground" aria-label="Minimal top-down car outline with wheels and headlamps">
                                <g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <!-- Body -->
                                    <rect x="20" y="5" width="80" height="230" rx="28"/>

                                    <!-- Windshield / roof arc -->
                                    <path d="M30 90 C60 68 60 68 90 90"/>

                                    <!-- Cabin waist line -->
                                    <path d="M30 125 C60 138 60 138 90 125"/>

                                    <!-- Rear window / trunk arc -->
                                    <path d="M30 170 C60 188 60 188 90 170"/>

                                    <!-- Mirrors -->
                                    <path d="M20 95 L10 105"/>
                                    <path d="M100 95 L110 105"/>

                                    <!-- Rear detail -->
                                    <path d="M50 200 H70"/>

                                    <!-- Wheels -->
                                    <line x1="10" y1="50" x2="10" y2="90"/>
                                    <line x1="110" y1="50" x2="110" y2="90"/>
                                    <line x1="10" y1="150" x2="10" y2="190"/>
                                    <line x1="110" y1="150" x2="110" y2="190"/>

                                    <!-- Headlamps -->
                                    <circle cx="35" cy="12" r="4"/>
                                    <circle cx="85" cy="12" r="4"/>
                                </g>
                            </svg>
                            
                            <!-- Sun exposure labels positioned around the car -->
                            <!-- Front -->
                            <div class="absolute -top-6 left-1/2 transform -translate-x-1/2 text-center">
                                <div class="bg-background border rounded-lg px-2 py-1 shadow-sm">
                                    <div class="text-xs font-medium text-muted-foreground uppercase tracking-wide">Front</div>
                                    <div class="text-sm font-semibold" id="front-percentage">0%</div>
                                </div>
                            </div>
                            
                            <!-- Left -->
                            <div class="absolute top-1/2 -left-12 transform -translate-y-1/2 text-center">
                                <div class="bg-background border rounded-lg px-2 py-1 shadow-sm">
                                    <div class="text-xs font-medium text-muted-foreground uppercase tracking-wide">Left</div>
                                    <div class="text-sm font-semibold" id="left-percentage">0%</div>
                                </div>
                            </div>
                            
                            <!-- Right -->
                            <div class="absolute top-1/2 -right-12 transform -translate-y-1/2 text-center">
                                <div class="bg-background border rounded-lg px-2 py-1 shadow-sm">
                                    <div class="text-xs font-medium text-muted-foreground uppercase tracking-wide">Right</div>
                                    <div class="text-sm font-semibold" id="right-percentage">0%</div>
                                </div>
                            </div>
                            
                            <!-- Back -->
                            <div class="absolute -bottom-6 left-1/2 transform -translate-x-1/2 text-center">
                                <div class="bg-background border rounded-lg px-2 py-1 shadow-sm">
                                    <div class="text-xs font-medium text-muted-foreground uppercase tracking-wide">Back</div>
                                    <div class="text-sm font-semibold" id="back-percentage">0%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </aside>
        </main>


        
        <!-- Route Data Section -->
        <section class="py-8 px-4 bg-secondary/30">
            <div class="max-w-6xl mx-auto">
                <h2 class="text-lg md:text-xl font-bold mb-4 text-center flex items-center justify-center gap-2">
                    <span class="text-lg">üìä</span>
                    Route Data
                </h2>
                <div class="p-4 bg-background rounded-lg border shadow-sm" id="api-data-section">
                    <div id="route-data-content">
                        <p class="text-muted-foreground italic text-center text-sm">Calculate a route above to see the API data being used for analysis...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Information Section -->
        <section class="py-12 px-4">
            <div class="max-w-6xl mx-auto">
                <div class="grid lg:grid-cols-2 gap-8 lg:gap-12">
                    <div>
                        <div class="mb-6">
                            <h2 class="text-lg md:text-xl font-bold mb-4 flex items-center gap-2">
                                <span class="text-lg">üòé</span>
                                Why Check Sun Exposure?
                            </h2>
                            <div class="space-y-4 leading-relaxed">
                                <p class="text-sm text-muted-foreground">This project helps you make smart seating decisions for road trips:</p>
                                <div class="space-y-3">
                                    <div class="flex items-start gap-3 p-3 bg-secondary/50 rounded-lg">
                                        <span class="text-lg flex-shrink-0">ü™ë</span>
                                        <div>
                                            <h3 class="font-semibold mb-0.5 text-sm">Choose Your Side</h3>
                                            <p class="text-muted-foreground text-xs">If you can pick where to sit, why not avoid the sunny side?</p>
                                        </div>
                                    </div>
                                    <div class="flex items-start gap-3 p-3 bg-secondary/50 rounded-lg">
                                        <span class="text-lg flex-shrink-0">üî•</span>
                                        <div>
                                            <h3 class="font-semibold mb-0.5 text-sm">Let Others Cook</h3>
                                            <p class="text-muted-foreground text-xs">Perfect for deciding who gets the hot seat on long drives</p>
                                        </div>
                                    </div>
                                    <div class="flex items-start gap-3 p-3 bg-secondary/50 rounded-lg">
                                        <span class="text-lg flex-shrink-0">üìÖ</span>
                                        <div>
                                            <h3 class="font-semibold mb-0.5 text-sm">Plan Ahead</h3>
                                            <p class="text-muted-foreground text-xs">Know what to expect before you hit the road</p>
                                        </div>
                                    </div>
                                    <div class="flex items-start gap-3 p-3 bg-secondary/50 rounded-lg">
                                        <span class="text-lg flex-shrink-0">ü§î</span>
                                        <div>
                                            <h3 class="font-semibold mb-0.5 text-sm">Pure Curiosity</h3>
                                            <p class="text-muted-foreground text-xs">Ever wondered which direction the sun hits during your journey?</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                
                    <div>
                        <div class="mb-6">
                            <h2 class="text-lg md:text-xl font-bold mb-4 flex items-center gap-2">
                                <span class="text-lg">üî¨</span>
                                How Sun Exposure is Calculated
                            </h2>
                            <div class="space-y-4 leading-relaxed">
                                <p class="text-sm text-muted-foreground">This tool provides a <strong>rough estimation</strong> using simplified calculations:</p>
                                
                                <div class="space-y-3">
                                    <div class="p-4 bg-secondary/50 rounded-lg border">
                                        <div class="flex items-start gap-3 mb-2">
                                            <span class="text-lg flex-shrink-0">üìç</span>
                                            <h3 class="text-sm font-semibold">Step 1: Route & Time Analysis</h3>
                                        </div>
                                        <p class="text-muted-foreground pl-8 text-xs">Uses OpenStreetMap API to get route coordinates and actual travel time. Distributes analysis points evenly along the route.</p>
                                    </div>
                                    
                                    <div class="p-4 bg-secondary/50 rounded-lg border">
                                        <div class="flex items-start gap-3 mb-2">
                                            <span class="text-lg flex-shrink-0">‚òÄÔ∏è</span>
                                            <h3 class="text-sm font-semibold">Step 2: Sun Position</h3>
                                        </div>
                                        <p class="text-muted-foreground pl-8 text-xs">Calculates sun position using SunCalc library. All times are in UTC to keep things simple.</p>
                                    </div>
                                    
                                    <div class="p-4 bg-secondary/50 rounded-lg border">
                                        <div class="flex items-start gap-3 mb-2">
                                            <span class="text-lg flex-shrink-0">üéØ</span>
                                            <h3 class="text-sm font-semibold">Step 3: Exposure Estimation</h3>
                                        </div>
                                        <p class="text-muted-foreground pl-8 text-xs">Compares sun direction with car orientation to estimate which sides get sun exposure.</p>
                                    </div>
                                </div>
                                
                                <div class="p-4 bg-accent/50 rounded-lg border">
                                    <h3 class="text-sm font-semibold mb-3 flex items-center gap-2">
                                        <span class="text-sm">‚ö†Ô∏è</span>
                                        Important Limitations
                                    </h3>
                                    <div class="grid grid-cols-1 gap-2 text-xs text-muted-foreground">
                                        <div class="flex items-center gap-2">
                                            <span class="w-1 h-1 bg-muted-foreground rounded-full flex-shrink-0"></span>
                                            <span>Assumes constant speed (no traffic/stops)</span>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <span class="w-1 h-1 bg-muted-foreground rounded-full flex-shrink-0"></span>
                                            <span>Ignores terrain, buildings, trees</span>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <span class="w-1 h-1 bg-muted-foreground rounded-full flex-shrink-0"></span>
                                            <span>Perfect weather conditions</span>
                                        </div>
                                        <div class="flex items-center gap-2">
                                            <span class="w-1 h-1 bg-muted-foreground rounded-full flex-shrink-0"></span>
                                            <span>Direct sunlight only (no reflections)</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Call to Action Section -->
        <section class="py-8 px-4 bg-primary">
            <div class="max-w-4xl mx-auto text-center text-primary-foreground">
                <h2 class="text-lg md:text-xl font-bold mb-4 flex items-center justify-center gap-2">
                    <span class="text-lg">üöó</span>
                    Start Planning Your Journey
                </h2>
                <p class="text-sm opacity-90 mb-4 max-w-2xl mx-auto">
                    A tool to satisfy your curiosity about sun exposure during road trips.
                </p>
            </div>
        </section>
        
        <footer class="border-t px-4 py-3 mt-auto">
            <div class="text-center text-xs md:text-sm text-muted-foreground">
                <p>&copy; 2025 Sun Exposure Route Planner | 
                    <a href="https://github.com/gaborvecsei/Car-Route-Visualizer" class="text-primary no-underline hover:underline">GitHub</a> | 
                    <span class="italic">A fun pet project for entertainment only</span>
                </p>
            </div>
        </footer>
    </div>
    
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/suncalc@1.9.0/suncalc.js"></script>
    <script src="config.js?v=3"></script>
    <script src="script.js?v=3"></script>
    
    <!-- Service Worker Registration - DISABLED FOR DEVELOPMENT -->
    <!--
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js')
                    .then(function(registration) {
                        console.log('ServiceWorker registration successful:', registration.scope);
                        
                        // Handle updates
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    // Show update notification
                                    if (confirm('A new version is available. Refresh to update?')) {
                                        newWorker.postMessage({type: 'SKIP_WAITING'});
                                        window.location.reload();
                                    }
                                }
                            });
                        });
                    })
                    .catch(function(error) {
                        console.log('ServiceWorker registration failed:', error);
                    });
            });
        }
    </script>
    -->
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-32K7GL7RDQ"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-32K7GL7RDQ', {
            page_title: 'Route Sun Exposure Visualizer',
            custom_map: {custom_parameter_1: 'route_analysis'}
        });
        
        // Error tracking
        window.addEventListener('error', function(e) {
            gtag('event', 'exception', {
                description: e.message,
                fatal: false,
                file: e.filename,
                line: e.lineno
            });
        });
        
        // Track unhandled promise rejections
        window.addEventListener('unhandledrejection', function(e) {
            gtag('event', 'exception', {
                description: 'Unhandled Promise Rejection: ' + e.reason,
                fatal: false
            });
        });
    </script>
</body>
</html>
